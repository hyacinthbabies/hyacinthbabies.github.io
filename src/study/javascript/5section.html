<h2><strong>第5章 引用类型</strong></h2>

<h3>一、Object类型</h3>
创建Object实例的方式2种：

<ul>
	<li>使用<span class="marker">new</span>后跟Object构造函数</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var person = new Object();<br />
person.name = &quot;shq&quot;;</div>

<ul>
	<li>使用<span class="marker">对象字面量</span>表示法</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var person = {<br />
&nbsp;&nbsp; name : &quot;shq&quot;<br />
};</div>
访问属性的方式2中：<ins>点表示法</ins>和<ins>方括号表示</ins>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">alert(person.name);//点表示法（最好使用此）<br />
alert(person[&quot;name&quot;]);//方括号表示法<br />
var propertyName = &quot;name&quot;;<br />
alert(person[propertyName]);//方括号访问变量</div>

<h3>二、Array类型</h3>
创建数组的基本方式2种：

<ul>
	<li>使用new后跟Array构造函数，new可省略</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = new Array();//new&nbsp;<br />
var colors = new Array(20);//数组长度为20<br />
var colors = new Array(&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;);//包含3个字符串的数组</div>

<ul>
	<li>使用数组字面量表示法</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];</div>
访问值的方式：

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">alert(colors[0]);//red，索引从0-(length-1)<br />
alert(colors.length);//长度，3</div>

<h3>1.检测数组</h3>
对于一个网页或者一个全局作用域：<span class="marker">instanceof</span><br />
ECMAScript5：<span class="marker">Array.isArray()</span><br />
支持isArray的浏览器：IE9+、Firefox4+、Safari5+、Opera10.5+、Chrome
<h3>2.转换方法</h3>
返回由数组中每个值的字符串形式拼接而成的一个以逗号分隔的字符串<span class="marker">toLocaleString()</span>、<span class="marker">toString()</span>、<span class="marker">valueOf()</span>、<span class="marker">join()</span>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];<br />
alert(colors.toString());//red,blue,green<br />
alert(colors.toLocaleString());//red,blue,green<br />
alert(colors.valueOf());//red,blue,green<br />
alert(colors);//red,blue,green <ins>会在后台调用toString()方法</ins><br />
alert(colors.join(&quot;,&quot;));//red,blue,green<br />
alert(colors.join(&quot;||&quot;));//red||blue||green</div>

<h3>3.栈方法</h3>
数组可以表现得像栈一样，LIFO<ins>后进先出</ins><br />
插入：<span class="marker">push()</span>逐个添加到数字末尾，并返回修改后数组的长度<br />
移除：<span class="marker">pop()</span>从数组末尾移除最后一项，返回移除的项

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = new Array();<br />
var count = colors.push(&quot;red&quot;,&quot;green&quot;);<br />
alert(count);//2<br />
alert(colors);//[&quot;red&quot;,&quot;green&quot;]<br />
var item = colors.pop();<br />
alert(item);//&quot;green&quot;</div>

<h3>4.队列方法</h3>
数组也可以表现得像队列一样，FIFO<ins>先进先出</ins><br />
插入：<span class="marker">unshift()</span>在数组前端添加任意个项并返回新数组的长度<br />
移除：<span class="marker">shift()</span>移除数组中的第一个项并返回该项

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = new Array();<br />
var count = colors.unshift(&quot;red&quot;,&quot;green&quot;);<br />
alert(count);//2<br />
alert(colors);//[&quot;green&quot;,&quot;red&quot;]<br />
var item = colors.shift();<br />
alert(item);//&quot;green&quot;&nbsp;</div>
<ins>push()+shift()实现先进先出、pop()+unshift()实现后进后出</ins>

<h3>5.重排序方法</h3>
<span class="marker">reverse()</span>反转数组项的顺序<br />
<span class="marker">sort()</span>默认升序排列，会调用toString()进行转型后比较字符串<br />
<ins>sort()可以接收函数作为参数function(arg1,arg2)</ins>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var values = [0,1,5,10,15];<br />
values.sort();<br />
alert(values);//0,1,10,15,5<br />
//利用函数纠正排序<br />
function compare(value1,value2){<br />
&nbsp;&nbsp;if(value1 &lt; value2){<br />
&nbsp;&nbsp; &nbsp; &nbsp;return -1;<br />
&nbsp;&nbsp; }else if(value1 &gt; value2){<br />
&nbsp;&nbsp; &nbsp; &nbsp; return 1;<br />
&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; return 0;<br />
&nbsp; &nbsp;}<br />
&nbsp; &nbsp;//对于数值类型或valueOf()方法返回数值类型的对象类型,直接使用<br />
&nbsp; &nbsp;//return value2-value1;//升序<br />
}<br />
var values = [0,1,5,10,15];<br />
values.sort(compare);<br />
alert(values);//0,1,5,10,15</div>

<h3>6.操作方法</h3>
<span class="marker">concat()</span>创建当前数值的一个副本，然后接收到的参数添加到这个副本的末尾，构建新数值

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;];<br />
var colors2 = colors.concat(&quot;yellow&quot;,[&quot;black&quot;,&quot;brown&quot;]);<br />
alert(colors);//red,green,blue<br />
alert(colors2);//red,green,blue,yellow,black,brown</div>
<span class="marker">slice()</span>能够基于当前数组中的一个或多个项创建一个数组<br />
接收一或两个参数，即<ins>slice(返回项的起始,结束位置)</ins>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;yellow&quot;,&quot;purple&quot;];<br />
var colors2 = colors.slice(1);<br />
var colors3 = colors.slice(1,4);<br />
var colors4 = colors.slice(-1);//-1+colors.length = 4<br />
alert(colors2);//green,blue,yellow,purplr<br />
alert(colors3);//green,blue,yellow<br />
alert(colors4);//purple</div>
<span class="marker">splice()</span>主要用途是向数组的中部插入项，使用方法有3种

<ul>
	<li>删除:<ins>splice(起始位置，要删除的项数)</ins></li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;];<br />
var removed = splice(0,1);//删除第一项<br />
alert(colors);//green,blue<br />
alert(removed);//red</div>

<ul>
	<li>插入:<ins>splice(起始位置，0，要插入的项)</ins></li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;];<br />
var removed = splice(1,0,&quot;yellow&quot;,&quot;orange&quot;);//从位置1开始插入2项<br />
alert(colors);//red,green,yellow,orange,blue<br />
alert(removed);//返回的是一个空数组</div>

<ul>
	<li>替换:<ins>splice(起始位置，要删除的项数，要插入的任意数量的项)</ins></li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var colors = [&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;];<br />
var removed = splice(1,1,&quot;yellow&quot;,&quot;purple&quot;);//插入2项，删除1项<br />
alert(colors);//red,yellow,purple,blue<br />
alert(removed);//green,返回的数组中只包含一项</div>

<h3>7.位置方法</h3>
返回要查找的项在数组中的位置，或在没找到的情况下返回-1(查找必须严格相等，<strong>===</strong>)<br />
<span class="marker">indexOf()</span>:从数组的开头(0)开始向后找<br />
<ins>indexOf(要查找的项,表示查找起点位置的索引(可选))</ins>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var numbers = [1,2,3,4,5,4,3,2,1];<br />
alert(numbers.indexOf(4));//3<br />
alert(numbers.indexOf(4,4));//5
<hr />var person = {name:&quot;Nic&quot;};<br />
var people = [{name:&quot;Nic&quot;}];<br />
var morePeople = [person];<br />
alert(people.indexOf(person));//-1<br />
alert(morePeople.indexOf(person));//0</div>
<span class="marker">lastIndexOf()</span>:从数组的末尾开始向前找<br />
<ins>lastIndexOf(要查找的项,表示查找起点位置的索引(可选))</ins>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var numbers = [1,2,3,4,5,4,3,2,1];<br />
alert(numbers.lastIndexOf(4));//5<br />
alert(numbers.lastIndexOf(4,4));//3</div>
浏览器：IE9+、Firefox2+、Safari3+、Opera9.5、Chrome

<h3>8.迭代方法</h3>
<ins>迭代方法(要在每一项上运行的函数，运行该函数的作用域对象--影响this的值(可选))</ins><br />
<ins>传入的函数(数组项的值,该项在数组中的位置,数组对象本身)</ins>

<ul>
	<li><span class="marker">every()</span>:对数组中的每一项运行给定函数，如果该函数对每一项都返回true，则返回true</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var numbers = [1,2,3,4,5,4,3,2,1];<br />
var everyResult = numbers.every(function(item,index,array){<br />
&nbsp; return (item &gt;2);<br />
});<br />
alert(everyResult);//false</div>

<ul>
	<li><span class="marker">filter()</span>:对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var numbers = [1,2,3,4,5,4,3,2,1];<br />
var filterResult = numbers.filter(function(item,index,array){<br />
&nbsp; return (item &gt;2);<br />
});<br />
alert(filterResult);//[3,4,5,4,3]</div>

<ul>
	<li><span class="marker">forEach()</span>:对数组中的每一项运行给定函数，这个方法没有返回值</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">//本质上与for循环迭代数组一样<br />
var numbers = [1,2,3,4,5,4,3,2,1];<br />
numbers.forEach(function(item,index,array){<br />
&nbsp; //执行某些操作<br />
});</div>

<ul>
	<li><span class="marker">map()</span>:对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var numbers = [1,2,3,4,5,4,3,2,1];<br />
var mapResult = numbers.map(function(item,index,array){<br />
&nbsp; return item * 2<br />
});<br />
alert(mapResult);//[2,4,6,8,10,8,6,4,2]</div>

<ul>
	<li><span class="marker">some()</span>:对函数中的每一项运行给定函数，如果该函数对任一项返回true，则返回true</li>
</ul>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">var numbers = [1,2,3,4,5,4,3,2,1];<br />
var someResult = numbers.some(function(item,index,array){<br />
&nbsp; return (item &gt;2);<br />
});<br />
alert(someResult);//true</div>
浏览器：IE9+、Firefox2+、Safari3+、Opera9.5、Chrome

<h3>9.缩小方法</h3>
迭代数组的所有项，然后构建一个最终返回的值<br />
<ins>缩小方法(在每一项上调用的函数,作为缩小基础的初始值(可选))</ins><br />
<ins>传入的函数(前一个值，当前值，项的索引，数组对象)返回的任何值作为第一个参数自动传给下一项</ins><br />
<span class="marker">reduce():</span>从数组的第一项开始，逐个遍历到最后。执行求数组中的所有值之和的操作

<div style="background:#eeeeee;border:1px solid #cccccc;padding:5px 10px;">var values = [1,2,3,4,5];<br />
var sum = values.reduce(function(prev,cur,index,array){<br />
&nbsp; return prev + cur;//第一次执行prev是1，第二次执行prev是3（1+2）<br />
});<br />
alert(sum);//15</div>
<span class="marker">reduceRight()</span>:从数组的最后一项开始，向前遍历到第一项

<div style="background:#eeeeee;border:1px solid #cccccc;padding:5px 10px;">var values = [1,2,3,4,5];<br />
var sum = values.reduceRight(function(prev,cur,index,array){<br />
&nbsp; return prev + cur;//第一次执行prev是5，第二次执行prev是9（5+4）<br />
});<br />
alert(sum);//15</div>
浏览器：IE9+、Firefox3+、Safari4+、Opera10.5、Chrome

<h3>三、Date类型</h3>
Date类型使用自UTC国际协调时间1970年1月1日午夜(零时)开始经过的毫秒数来保存日期<br />
创建日期对象，使用new操作符和Date构造函数即可
<div style="background:#eeeeee;border:1px solid #cccccc;padding:5px 10px;">var now = new Date();//获取当前日期和时间<br />
alert(now);//Wed Dec 21 2016 11:08:11 GMT+0800 (中国标准时间)</div>
根据特定日期和时间创建日期对象:<br />
<span class="marker">Date.parse()</span>:接收表示日期的字符串参数，返回相应日期的毫秒数。如果不能表示日期，则返回NaN

<div style="background:#eeeeee;border:1px solid #cccccc;padding:5px 10px;">var someDate = new Date(Date.parse(&quot;May 25,2004&quot;));<br />
var someDate = new Date(&quot;May 25,2004&quot;);//与调用parse等价，不用浏览器实现可能不同<br />
alert(someDate);//Tue May 25 2004 00:00:00 GMT+0800 (中国标准时间)</div>
<span class="marker">Date.UTC():</span>返回表示日期的毫秒数<br />
<ins>date.UTC(年份，基于0的月份0-11，月中哪一天1-31(默认1），小时数0-23(默认0)，分钟(默认0)，秒(默认0)，毫秒数(默认0))只有前2个参数必须</ins>

<div style="background:#eeeeee;border:1px solid #cccccc;padding:5px 10px;">//有疑问<br />
//按理是GMT时间2005年5月5日下午5:55:55<br />
var all = new Date(Date.UTC(2005,4,5,17,55,55));<br />
alert(all);//Fri May 06 2005 01:55:55 GMT+0800 (中国标准时间)<br />
//本地时间2005年5月5日下午5:55:55<br />
var all = new Date(2005,4,5,17,55,55);</div>
